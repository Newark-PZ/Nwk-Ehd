<section class="map-frame">
        <map-map class="map" #map [height]="'85vh'" [width]="'100%'" (pointerMove)="dispatchHover($event)" (singleClick)="dispatchClick($event)">
            <map-view [zoom]="13" [maxZoom]="19" [enableRotation]="false">
                <map-interaction-default></map-interaction-default>
                <map-control-scaleline [units]="'us'"></map-control-scaleline>
                <map-coordinate [x]="-74.1723667" [y]="40.735657" [srid]="'EPSG:4326'"></map-coordinate>
                <map-control-attribution></map-control-attribution>
            </map-view>
            <map-layer-group zIndex="0">
                <map-layer-tile zIndex="0">
                    <map-source-xyz [url]="basemapUrl" [attributions]="basemapAttr"></map-source-xyz>
                </map-layer-tile>
                <map-layer-tile zIndex="4">
                    <map-source-xyz [url]="cartoLabelsUrl"></map-source-xyz>
                </map-layer-tile>
            </map-layer-group>
            <map-overlay #hover 
            id="selectionMarker"
            [style.display]="hovered && hovered.blocklot ? 'flex' : 'none'"
            [insertFirst]="true"
            [stopEvent]="false" zIndex="14">
            <map-content>
                <div class="hoverFlag" [style.display]="hovered.blocklot ? 'flex' : 'none'">
                    <span>{{ hovered.proploc }}</span>
                    <span>{{ hovered.blocklot }}</span>
                </div>
            </map-content>
            </map-overlay>
        </map-map>
        <div class="info-box map-buttons-top right">
            <button mat-button *ngIf="!cardOpened" (click)="cardOpened = !cardOpened" style="width: 100%;height: 1.5rem;line-height: .5rem;"><mat-icon>expand_more</mat-icon></button>
            <mat-card class="example-card" *ngIf="cardOpened">
                <mat-card-header>
                    <mat-card-title style="font-weight: light"><b>{{clicked.data[0]?.value ? clicked.data[0].value :'2020'}}</b> | {{clicked.data[1]?.value ? clicked.data[1].value.slice(0,25) :'Rent Control Dashboard'}}</mat-card-title>
                    <mat-card-subtitle>{{clicked.data[23]?.value ? clicked.data[23].value :"Rent Control Properties"}}</mat-card-subtitle>
                </mat-card-header>
                <!-- <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu"> -->
                <mat-card-content>
                    <p *ngIf="clicked.blocklot.length < 2">
                        Click the points on the map to learn more about Rent Control's work in the community.
                    </p>
                    <mat-table  *ngIf="clicked.blocklot.length > 2" style="max-height: 40vh;overflow-y: scroll;" [dataSource]="clicked.data" multiTemplateDataRows>
                        <ng-container matColumnDef="prop">
                            <mat-cell *matCellDef="let row">{{ row.prop | titlecase}}</mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="value">
                          <mat-cell *matCellDef="let row">
                            <ng-container>
                                {{ row.value }}
                            </ng-container>
                          </mat-cell>
                        </ng-container>
                        <mat-row class="row" *matRowDef="let row; columns: ['prop','value'];" ></mat-row>
                      </mat-table>
                    </mat-card-content>
                <mat-card-actions>
                  <button mat-button (click)="cardOpened = !cardOpened" style="width: 100%;height: 1.5rem;line-height: .5rem;">
                    <mat-icon>expand_less</mat-icon>hide <mat-icon>expand_less</mat-icon>
                </button>
                </mat-card-actions>
              </mat-card>
        </div>
</section>